# Инструкция по сбору данных о малых бизнесах в Праге

## Требования

Для работы скрипта необходим **Google Maps API ключ**.

## Быстрый старт

### 1. Получите Google Maps API ключ

1. Перейдите на https://console.cloud.google.com/
2. Создайте новый проект или выберите существующий
3. Включите **Places API** и **Places API (New)**
4. Создайте API ключ в разделе "Credentials"

### 2. Настройте API ключ

**Вариант A: Через скрипт (рекомендуется)**
```powershell
py scripts\setup_api_key.py
```

**Вариант B: Через переменную окружения**
```powershell
$env:GOOGLE_MAPS_API_KEY="ваш_ключ_здесь"
```

**Вариант C: Через .env файл**
Создайте файл `.env` в корне проекта:
```
GOOGLE_MAPS_API_KEY=ваш_ключ_здесь
```

### 3. Запустите сбор данных

```powershell
cd c:\Users\-\Desktop\MVP\research_results
$env:PYTHONIOENCODING="utf-8"
py scripts\prague_business_leads.py --categories kadeřnictví kosmetika restaurace kavárna masáž manikúra --max-per-category 20
```

## Что собирает скрипт

Скрипт собирает следующую информацию о каждом бизнесе:

- ✅ **Название бизнеса**
- ✅ **Телефон** (чешские номера в формате +420 XXX XXX XXX)
- ✅ **Email** (извлекается с сайтов и реестров)
- ✅ **Имя владельца** (из чешских бизнес-реестров)
- ✅ **Фамилия владельца**
- ✅ **Полное имя владельца**
- ✅ **Адрес**
- ✅ **Веб-сайт**
- ✅ **Категория бизнеса**
- ✅ **IČO** (идентификационный номер компании)

## Результат

Результаты сохраняются в Excel файл в папке `leads/` с именем:
```
prague_businesses_YYYYMMDD_HHMMSS.xlsx
```

## Категории для поиска

По умолчанию скрипт ищет следующие категории малого бизнеса:

- `kadeřnictví` - парикмахерские
- `kosmetika` - косметические салоны
- `restaurace` - рестораны
- `kavárna` - кафе
- `masáž` - массажные салоны
- `manikúra` - маникюрные салоны

Вы можете указать свои категории через параметр `--categories`.

## Пример использования

```powershell
# Поиск парикмахерских и косметических салонов (по 10 каждого)
py scripts\prague_business_leads.py --categories kadeřnictví kosmetika --max-per-category 10

# Поиск ресторанов и кафе (по 20 каждого)
py scripts\prague_business_leads.py --categories restaurace kavárna --max-per-category 20
```

## Структура Excel файла

Файл содержит следующие колонки:

| Название бизнеса | Телефон | Email | Имя владельца | Фамилия владельца | Полное имя владельца | IČO | Адрес | Веб-сайт | Категория | Google Maps URL |
|-----------------|---------|-------|---------------|-------------------|---------------------|-----|-------|----------|-----------|-----------------|

## Примечания

- Скрипт автоматически нормализует чешские телефонные номера
- Поиск владельцев выполняется через чешские бизнес-реестры (ARES, Obchodní rejstřík)
- Email извлекается с веб-сайтов компаний
- Скрипт соблюдает rate limits Google Maps API

## Устранение проблем

### "No API key configured"
Установите API ключ одним из способов выше.

### "UnicodeEncodeError"
Убедитесь, что запускаете скрипт с установленной переменной:
```powershell
$env:PYTHONIOENCODING="utf-8"
```

### "ModuleNotFoundError"
Установите недостающие зависимости:
```powershell
py -m pip install pandas pydantic openpyxl httpx playwright
```

## Пример результата

Создан пример файла: `leads/example_prague_businesses.xlsx` - показывает структуру данных.
